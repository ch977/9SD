function getPassportHost(){var n=location.hostname,t=n.substring(n.lastIndexOf("."));return"http://passport.cnblogs"+t}function login(){return location.href=getPassportHost()+"/login.aspx?ReturnUrl="+location.href,!1}function login2(n){var t=encodeURIComponent(location.href+"#"+n);return location.href=getPassportHost()+"/login.aspx?ReturnUrl="+t,!1}function register(){return location.href=getPassportHost()+"/register.aspx?ReturnUrl="+location.href,!1}function logout(){return confirm("确定要退出吗?")&&(location.href=getPassportHost()+"/logout.aspx?ReturnUrl="+location.href),!1}function getHostPostfix(){var n=location.hostname;return n.substring(n.lastIndexOf("."),n.length)}function GetUserInfo(){var n="http://passport.cnblogs"+getHostPostfix();$.ajax({url:n+"/user/LoginInfo",dataType:"jsonp",success:function(t){$("#login_area").html(t);var i=parseInt($("#current_spaceId").html());i>0&&$.ajax({url:n+"/user/NewMsgCount",data:"spaceUserId="+i,dataType:"jsonp",success:function(n){n&&$("#msg_count").html("("+n+")").show()}})}})}function Check(n){if(n.keyCode==13){document.getElementById("btnSearch").focus();return}}function zzk_go(){var n=encodeURIComponent(document.getElementById("q").value);window.location="http://zzk.cnblogs.com/s?t=n&w="+n}function zzk_go_enter(n){if(n.keyCode==13)return zzk_go(),!1}function CheckAudit(){$.ajax({url:"/CommonAjax/GetAuditReminder",type:"get",dataType:"text",contentType:"application/text; charset=utf8",success:function(n){$("#lbAuditTips").html(n);$("#lbAuditTips").show()}})}function set_a_title(n){var t=$.trim($(n).text());t&&!$(n).attr("title")&&$(n).attr("title",t)}function google_search(){return location.href="http://zzk.cnblogs.com/s?t=n&w="+encodeURIComponent(document.getElementById("google_search_q").value),!1}function google_search_enter(n){if(n.keyCode==13)return google_search(),!1}function ReplyVoteInComment(n,t){ReplyVote(n,t)}function ReplyVote(n,t,i){var r,u;return i||(i=""),r=$("#lbContentID").val(),r==null&&(r=0),u=$("#comment_vote_tips_"+i+n),u.html("提交中..."),$.ajax({url:"/Comment/VoteNewsComment",data:'{"contentId":'+r+',"commentId":'+n+',"action":"'+t+'"}',type:"post",dataType:"json",contentType:"application/json; charset=utf8",success:function(r){r.IsSucceed&&(t=="agree"?$("#agree_"+i+n).html(parseInt($("#agree_"+i+n).html())+1):t=="anti"&&$("#anti_"+i+n).html(parseInt($("#anti_"+i+n).html())+1));$(u).html(r.Message)},error:function(n){$(u).html(n.responseText)}}),!1}function VoteNews(n,t){$("#digg_tip_"+n).html("提交中...");$.ajax({url:"/News/VoteNews",data:'{"contentId":'+n+',"action":"'+t+'"}',type:"post",dataType:"json",contentType:"application/json; charset=utf8",success:function(i){var r;i.IsSucceed&&(t=="agree"?(r=$("#digg_num_"+n),$(r).html(parseInt($(r).html())+1)):t=="anti"&&(r=$("#bury_num_"+n),$(r).html(parseInt($(r).html())+1)));$("#digg_tip_"+n).html(i.Message)},error:function(t){$("#digg_tip_"+n).html(t.reponseText)}})}function LoadNewsCategory(n,t,i){$.ajax({url:"/Category/GetCategoryList",type:"GET",datatype:"json",contentType:"application/json; charset=utf-8",data:{bigCateId:t,loadType:i},success:function(t){t&&$("#"+n+"").html(t)}})}function GetCategoryListErect(n,t){$.ajax({url:"/Category/GetCategoryListErect",type:"GET",datatype:"json",contentType:"application/json; charset=utf-8",data:{bigCateId:n,cateID:t},success:function(n){n&&$("#NewsCategoryId").html(n)}})}function CommonLoadNews(n,t,i){$.ajax({url:n,type:"GET",datatype:"json",contentType:"application/json; charset=utf-8",data:{itemCount:i},success:function(n){n&&$("#"+t+"").html(n)}})}function LoadSideComments(n,t){$.ajax({url:"/CommentAjax/GetSideComments",type:"GET",datatype:"json",contentType:"application/json; charset=utf-8",data:{itemCount:t},success:function(t){t&&$("#"+n+"").html(t)}})}function LoadSideCommentsByTag(n,t,i){$.ajax({url:"/CommentAjax/GetSideCommentsByTag",type:"GET",datatype:"json",contentType:"application/json; charset=utf-8",data:{itemCount:t,tag:i},success:function(t){t&&$("#"+n+"").html(t)}})}function LoadSideCommentsByTopicId(n,t,i){$.ajax({url:"/CommentAjax/GetSideCommentsByTopicId",type:"GET",datatype:"json",contentType:"application/json; charset=utf-8",data:{itemCount:t,topicId:i},success:function(t){t&&$("#"+n+"").html(t)}})}function LoadPreNextNewsByContentId(n){$.ajax({url:"/NewsAjax/GetPreNewsById",type:"GET",datatype:"json",contentType:"application/json; charset=utf-8",data:{contentId:n},success:function(n){n?($("#HeadPreNewsId").attr({href:"http://news.cnblogs.com/n/"+n.ContentID+"/"}),$("#FootPreNewsId").html('<a href="http://news.cnblogs.com/n/'+n.ContentID+'/" class="gray">«<\/a> 上一篇：<a class="common_link" href="http://news.cnblogs.com/n/'+n.ContentID+'/">'+n.Title+'<\/a><span class="gray">('+n.SubmitdateFormat+")<\/span>")):($("#HeadPreNewsId").css("display","none"),$("#FootPreNewsId").css("display","none"))},error:function(n){$("#FootPreNewsId").html(n.responseText)}});$.ajax({url:"/NewsAjax/GetNextNewsById",type:"GET",datatype:"json",contentType:"application/json; charset=utf-8",data:{contentId:n},success:function(n){n?($("#HeadNextNewsId").attr({href:"http://news.cnblogs.com/n/"+n.ContentID+"/"}),$("#FootNextNewsId").html('<a href="http://news.cnblogs.com/n/'+n.ContentID+'/" class="gray">»<\/a> 下一篇：<a class="common_link" href="http://news.cnblogs.com/n/'+n.ContentID+'/">'+n.Title+'<\/a><span class="gray">('+n.SubmitdateFormat+")<\/span>")):($("#HeadNextNewsId").css("display","none"),$("#FootNextNewsId").css("display","none"))}})}function GetRelativeNews(n,t,i,r){$.ajax({url:"/NewsAjax/GetRelativeNews",type:"GET",datatype:"json",contentType:"application/json; charset=utf-8",data:{contentId:t,tags:i,itemCount:r},success:function(t){t&&$("#"+n+"").html(t)}})}function GetNewsComment(n){$.ajax({url:"/CommentAjax/GetComments",type:"GET",datatype:"json",cache:!1,contentType:"application/json; charset=utf-8",data:{contentId:n},beforeSend:function(){$("#comment_main_list").html("努力加载评论中...")},success:function(n){$(".user_comment").remove();$("#Comment_new").empty();$("#comment_main_list").html(n)},error:function(){$("#comment_main_list").html("不好意思！评论加载失败！")}})}function LoadIndexSideInfo(){$.ajax({url:"/NewsAjax/LoadIndexSideInfo",type:"GET",success:function(n){n&&$("#cate_news").before(n)}})}function LoadDetailommentInfo(){$.ajax({url:"/NewsAjax/LoadDetailommentInfo",type:"GET",success:function(n){n&&$("#comment_form_block").html(n)}})}var ajaxRequest={},googletag;ajaxRequest.type="post";ajaxRequest.dataType="json";ajaxRequest.contentType="application/json; charset=utf8";googletag=googletag||{};googletag.cmd=googletag.cmd||[];googletag.cmd.push(function(){googletag.defineSlot("/1090369/news_E1",[728,90],"div-gpt-ad-1346331527896-0").addService(googletag.pubads());googletag.defineSlot("/1090369/news_E2",[300,250],"div-gpt-ad-1346331527896-1").addService(googletag.pubads());googletag.defineSlot("/1090369/news_E3",[300,250],"div-gpt-ad-1346331527896-2").addService(googletag.pubads());googletag.defineSlot("/1090369/news_E5",[468,60],"div-gpt-ad-1346331527896-3").addService(googletag.pubads());googletag.pubads().enableSingleRequest();googletag.enableServices()});$(function(){var n=document.createElement("script"),t;n.async=!0;n.type="text/javascript";n.src="http://common.cnblogs.com/script/gpt.js";t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(n,t)})